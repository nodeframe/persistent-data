{"version":3,"sources":["../src/index.js"],"names":["bson","defaultPath","__dirname","Data","data","path","mergeOption","defaultData","options","load","newData","writeFileSync","serialize","existsSync","save","deserialize","readFileSync","unlink"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;AACA,IAAMA,OAAO,oBAAb;;AAEA,IAAMC,cAAcC,YAAU,cAA9B;;IAEqBC,I;AAEnB,gBAAYC,IAAZ,EAAiD;AAAA,QAAhCC,IAAgC,uEAA3BJ,WAA2B;AAAA,QAAfK,WAAe,uEAAH,EAAG;;AAAA;;AAC/C,SAAKC,WAAL,GAAmBH,IAAnB;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACD;;;;0BAEKF,I,EAAKI,O,EAAQ;AACjB,WAAKC,IAAL;AACA,UAAMC,UAAU,yBAAU,KAAKN,IAAf,EAAoBA,IAApB,EAAyBI,WAAS,KAAKF,WAAvC,CAAhB;AACA,mBAAGK,aAAH,CAAiB,KAAKN,IAAtB,EAA2BL,KAAKY,SAAL,CAAeF,OAAf,CAA3B;AACA,aAAOA,OAAP;AACD;;;2BAEK;AACJ,UAAG,CAAC,aAAGG,UAAH,CAAc,KAAKR,IAAnB,CAAJ,EAA6B;AAC3B,eAAO,KAAKS,IAAL,EAAP;AACD,OAFD,MAEK;AACH,eAAO,KAAKV,IAAL,GAAYJ,KAAKe,WAAL,CAAiB,aAAGC,YAAH,CAAgB,KAAKX,IAArB,CAAjB,CAAnB;AACD;AACF;;;yBAEID,I,EAAK;AACR,UAAMM,UAAUN,QAAM,KAAKG,WAA3B;AACA,mBAAGI,aAAH,CAAiB,KAAKN,IAAtB,EAA2BL,KAAKY,SAAL,CAAeF,OAAf,CAA3B;AACA,aAAOA,OAAP;AACD;;;6BAEO;AACN,mBAAGO,MAAH,CAAU,KAAKZ,IAAf;AACD;;;;;;kBA/BkBF,I","file":"index.js","sourcesContent":["import BSON from 'bson'\nimport fs from 'fs'\nimport deepmerge from 'deepmerge'\nconst bson = new BSON()\n\nconst defaultPath = __dirname+'/./data.bson'\n\nexport default class Data {\n\n  constructor(data,path=defaultPath,mergeOption={}){\n    this.defaultData = data\n    this.path = path\n    this.mergeOption = mergeOption\n  }\n\n  merge(data,options){\n    this.load()\n    const newData = deepmerge(this.data,data,options||this.mergeOption)\n    fs.writeFileSync(this.path,bson.serialize(newData))\n    return newData\n  }\n\n  load(){\n    if(!fs.existsSync(this.path)){\n      return this.save()\n    }else{\n      return this.data = bson.deserialize(fs.readFileSync(this.path))\n    }\n  }\n\n  save(data){\n    const newData = data||this.defaultData\n    fs.writeFileSync(this.path,bson.serialize(newData))\n    return newData\n  }\n\n  remove(){\n    fs.unlink(this.path)\n  }\n}\n"]}